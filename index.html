<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Major Drywall</title>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
</head>
<body>
    <nav>
        <a href='index.html'>save</a>
        <a href="search.html">search</a>
    </nav>
    <!-- CHANGE THIS! -->
    <form action="http://localhost:5000/save" action="post">
        <input type='date' name="date" />
        <input type='text' name='contractor' />
        <input type='text' name='owner' />
        <input type='text' name='job_address' />
        <input type='text' name='job_city' />
        <input type='text' name='lot' />
        <input type='text' name='block' />
        <input type='text' name='subdivision' />
        <input type='text' name='num' />
        <input type='text' name='job' />
        <hr>
        <input type='text' name='name' />
        <input type='text' name='labor' />
        <input type='text' name='material' />
        <input type='text' name='total' />
        <input type='text' name='bill_address' />
        <input type='text' name='bill_city' />
        <input type='text' name='bill_state' />
        <input type='text' name='bill_zip' />
        <input type='text' name='bill_email' />
        <input type='text' name='bid_notes' />
        <hr>
        <input type='text' name='half' />
        <input type='text' name='five' />
        <input type='text' name='sqr' />
        <input type='text' name='bull' />
        <input type='text' name='masking' />
        <input type='text' name='plastic' />
        <input type='text' name='fixall' />
        <input type='text' name='perf' />
        <input type='text' name='mud' />
        <input type='text' name='other_name' />
        <input type='text' name='other_cost' />
        <input type='text' name='misc' />
        <input type='text' name='shop_fee' />
        <input type='text' name='materials_total' />
        <input type='text' name='scheduling' />
        <input type='text' name='total_hrs' />
        <input type='text' name='percent_builder' />
        <input type='text' name='percent_drywall' />
        <input type='text' name='notes' />
        <hr>
        <input type="submit" onclick="save();return false;"/>
        <hr>
    </form>

    <p id="output">unchanged</p>

    <script>
    function save()
    {
        let localUrl = 'http://localhost:5000/save';
        //creating object to send in post req
        const obj = {};
        let inputs = document.getElementsByTagName('input');
        for( let i = 0; i < inputs.length; i++)
        {
            obj[inputs[i].name] = inputs[i].value;
        }
        $.ajax({
            type: 'POST',
            // make sure you respect the same origin policy with this url:
            // http://en.wikipedia.org/wiki/Same_origin_policy
            url: 'https://major-drywall.herokuapp.com/save',
            data: obj,
            success: function(msg){
                document.querySelector('#output').innerHTML = JSON.stringify(msg);
            }
        });
    } 
    
    </script>
</body>
</html>